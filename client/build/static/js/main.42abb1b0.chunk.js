(this["webpackJsonpnews-hawker"]=this["webpackJsonpnews-hawker"]||[]).push([[0],{41:function(e,t,n){},88:function(e,t,n){},96:function(e,t,n){"use strict";n.r(t);var c=n(29),a=n(77),r=n(104),i=n(105),s=n(103),l=n(75),o=n(3),j=n.n(o),d=n(69),b=n.n(d),u=(n(88),n(41),n(22)),h=n(12),x=n(70),p=n(76),m=n(2);Object(p.a)(x.loadAnimation);var O,g,v,f=function(){return Object(m.jsxs)("header",{children:[Object(m.jsx)("section",{className:"wings",children:Object(m.jsx)("lord-icon",{src:"https://cdn.lordicon.com/hpxruznz.json",trigger:"loop",colors:"primary:#ea5a5a,secondary:#08a88a",style:{width:"80px",height:"80px"}})}),Object(m.jsx)("h1",{children:Object(m.jsx)(u.b,{to:"/",id:"header-link",children:Object(m.jsx)("i",{children:"News Hawker"})})}),Object(m.jsx)("nav",{children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{children:Object(m.jsx)(u.b,{to:"/saved",children:"Saved Stories"})}),Object(m.jsx)("li",{children:Object(m.jsx)(u.b,{to:"/login",children:"Login"})})]})})]})},w=n(78),y=n(10),k=n.n(y),S=n(18),N=n(17),A=n(14),$=n(15),I=n(61),T=new(function(){function e(){Object(A.a)(this,e)}return Object($.a)(e,[{key:"getProfile",value:function(){return Object(I.a)(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!!e&&!this.isTokenExpired(e)}},{key:"isTokenExpired",value:function(e){try{return Object(I.a)(e).exp<Date.now()/1e3}catch(t){return!1}}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.assign("/")}}]),e}()),_=n(33),U=n(106),C=Object(U.a)(O||(O=Object(_.a)(["\n  query getUser($_id: String) {\n    me(_id: $_id) {\n      _id\n      username\n      email\n      password\n      savedArticles {\n        title\n        description\n        url\n        image\n        publishedAt\n        content\n        source {\n          name\n          url\n        }\n      }\n    }\n  }\n"]))),D=Object(U.a)(g||(g=Object(_.a)(["\n  query getArticle($search: String!) {\n    getArticle(search: $search) {\n      source {\n        name\n        url\n      }\n      title\n      description\n      content\n      url\n      image\n      publishedAt\n      source {\n        name\n        url\n      }\n    }\n  }\n"]))),E=(Object(U.a)(v||(v=Object(_.a)(["\n  query getSavedArticles {\n    getSavedArticles {\n      title\n      description\n      content\n      url\n      image\n      publishedAt\n      source {\n        name\n        url\n      }\n    }\n  }\n"]))),n(107));var B=function(e){var t=[],n=Object(E.a)(D),c=Object(N.a)(n,2),a=c[0],r=c[1].data;r&&(t=r.getArticle);var i=Object(o.useState)(""),s=Object(N.a)(i,2),l=s[0],j=s[1],d=Object(o.useState)(localStorage.getItem("saved_news")?JSON.parse(localStorage.getItem("saved_news")):[]),b=Object(N.a)(d,2),u=b[0],h=b[1],x=function(){var e=Object(S.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(l),a({variables:{search:l}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(S.a)(k.a.mark((function e(n){var c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=t.find((function(e){return e.id===n})),T.loggedIn()?T.getToken():null){e.next=4;break}return e.abrupt("return",!1);case 4:return e.prev=4,e.next=7,void((a=c).length?localStorage.setItem("saved_news",JSON.stringify(a)):localStorage.removeItem("saved_news"));case 7:if(e.sent.ok){e.next=10;break}throw new Error("something went wrong!");case 10:h([].concat(Object(w.a)(u),[c.id])),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),console.error(e.t0);case 16:case"end":return e.stop()}var a}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{children:[Object(m.jsx)("section",{id:"search",children:Object(m.jsxs)("div",{style:{display:"inline-block"},children:[Object(m.jsx)("h3",{className:"search-header",children:Object(m.jsx)("b",{children:"SEARCH ARTICLE BY NAME:"})}),Object(m.jsx)("input",{id:"topic-search",onChange:function(e){var t=e.target,n=(t.name,t.value);j(n)}}),Object(m.jsx)("button",{id:"topic-submit",onClick:x,children:Object(m.jsx)("i",{children:"SUBMIT"})})]})}),Object(m.jsx)("main",{children:t.map((function(e,t){return Object(m.jsxs)("div",{className:"article-box",children:[Object(m.jsxs)("section",{className:"article-content",children:[Object(m.jsx)("h4",{className:"article-title",children:Object(m.jsx)("a",{href:e.url,children:e.title})}),Object(m.jsx)("p",{className:"article-source",children:e.publishedAt.substring(0,10)}),Object(m.jsx)("p",{className:"article-text",children:e.description})]}),Object(m.jsx)("div",{className:"article-image",style:{backgroundImage:"url("+e.image+")"},onClick:function(){return p(e.id)},children:Object(m.jsx)("div",{className:"article-save",children:(null===u||void 0===u?void 0:u.some((function(t){return t===e.id})))?"This book has already been saved!":"Save this Book!"})})]},t)}))})]})},M={height:"90px",width:"100%",borderTop:"1px solid #882200"},J={paddingTop:"3px",borderTop:"1px solid #aa0000"},F={marginTop:"5px"};var q=function(){return Object(m.jsx)("footer",{children:Object(m.jsx)("div",{style:J,children:Object(m.jsx)("section",{style:M,children:Object(m.jsxs)("h2",{style:F,children:[Object(m.jsx)("a",{href:"https://github.com/Delaalex/",children:"Alejandro"})," | ",Object(m.jsx)("a",{href:"https://github.com/JG-77",children:"Jessie"})," | ",Object(m.jsx)("a",{href:"https://github.com/maxwellstickels/",children:"Max"})," | ",Object(m.jsx)("a",{href:"https://github.com/djony88",children:"Nikola"})]})})})})};var z,L,G,H,P=function(e){return Object(m.jsxs)("main",{children:[Object(m.jsx)("div",{style:{height:"70px"}}),Object(m.jsx)("p",{style:{textAlign:"center",fontSize:"72px"},children:Object(m.jsx)("u",{children:"404"})}),Object(m.jsx)("p",{style:{textAlign:"center"},children:" The page you are looking for does not exist! Sorry!"}),Object(m.jsx)("p",{style:{textAlign:"center"},children:Object(m.jsx)(u.b,{to:"/",style:{color:"#aaaaaa",textDecoration:"none"},children:"\u2190 Go to Homepage"})}),Object(m.jsx)("div",{style:{height:"100px"}})]})},R=n(42),Y=n(109),K=Object(U.a)(z||(z=Object(_.a)(["\n  mutation loginUser($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n      }\n    }\n  }\n"]))),Q=Object(U.a)(L||(L=Object(_.a)(["\n  mutation addUser($username: String!, $email: String!, $password: String!) {\n    addUser(username: $username, email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n      }\n    }\n  }\n"]))),V=(Object(U.a)(G||(G=Object(_.a)(["\n  mutation saveArticle(\n    $title: String!\n    $description: String!\n    $content: String!\n    $url: String!\n    $image: String\n    $publishedAt: String\n  ) {\n    saveArticle(\n      title: $title\n      description: $description\n      content: $content\n      url: $url\n      publishedAt: $publishedAt\n      image: $image\n    ) {\n      _id\n      userID\n      title\n      description\n      content\n      url\n      publishedAt\n      image\n    }\n  }\n"]))),Object(U.a)(H||(H=Object(_.a)(["\n  mutation remove($_id: ID!) {\n    removeArticle(_id: $_id) {\n      _id\n      userID\n      title\n      description\n      content\n      url\n      publishedAt\n      image\n    }\n  }\n"]))));var W=function(e){var t=Object(o.useState)({username:"",email:"",password:""}),n=Object(N.a)(t,2),a=n[0],r=n[1],i=Object(Y.a)(Q),s=Object(N.a)(i,1)[0],l=function(){var e=Object(S.a)(k.a.mark((function e(t){var n,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,s({variables:{username:a.username,email:a.email,password:a.password}});case 3:n=e.sent,c=n.data.addUser.token,T.login(c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(e){var t=e.target,n=t.name,i=t.value;r(Object(c.a)(Object(c.a)({},a),{},Object(R.a)({},n,i)))};return Object(m.jsxs)("main",{children:[Object(m.jsxs)("div",{className:"form-container",children:[Object(m.jsx)("h2",{children:"Signup"}),Object(m.jsxs)("form",{onSubmit:l,children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{htmlFor:"username",children:"Username:"}),Object(m.jsx)("input",{className:"spaced-input",placeholder:"Username",name:"username",type:"username",id:"username",onChange:j})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{htmlFor:"email",children:"Email:"}),Object(m.jsx)("input",{className:"spaced-input",placeholder:"youremail@test.com",name:"email",type:"email",id:"email",onChange:j})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{htmlFor:"pwd",children:"Password:"}),Object(m.jsx)("input",{className:"spaced-input",placeholder:"******",name:"password",type:"password",id:"pwd",onChange:j})]}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{type:"submit",className:"account-submit",children:Object(m.jsx)("i",{children:"SUBMIT"})})})]})]}),Object(m.jsx)("p",{style:{textAlign:"center",margin:"10px 0"},children:Object(m.jsx)(u.b,{to:"/login",children:"Or log in here!"})}),Object(m.jsx)("div",{style:{height:"60px"}})]})};var X=function(e){var t=Object(o.useState)({email:"",password:""}),n=Object(N.a)(t,2),a=n[0],r=n[1],i=Object(Y.a)(K),s=Object(N.a)(i,2),l=s[0],j=s[1].error,d=function(){var e=Object(S.a)(k.a.mark((function e(t){var n,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,l({variables:{email:a.email,password:a.password}});case 4:n=e.sent,c=n.data.login.token,T.login(c),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),b=function(e){var t=e.target,n=t.name,i=t.value;r(Object(c.a)(Object(c.a)({},a),{},Object(R.a)({},n,i)))};return Object(m.jsxs)("main",{children:[Object(m.jsxs)("div",{className:"form-container",children:[Object(m.jsx)("h2",{children:"Login"}),Object(m.jsxs)("form",{onSubmit:d,children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{htmlFor:"email",children:"E-Mail:"}),Object(m.jsx)("input",{className:"spaced-input",placeholder:"youremail@test.com",name:"email",type:"email",id:"email",onChange:b})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{htmlFor:"pwd",children:"Password:"}),Object(m.jsx)("input",{className:"spaced-input",placeholder:"******",name:"password",type:"password",id:"pwd",onChange:b})]}),j?Object(m.jsx)("div",{children:Object(m.jsx)("p",{children:"The provided credentials are incorrect"})}):null,Object(m.jsx)("div",{children:Object(m.jsx)("button",{type:"submit",className:"account-submit",children:Object(m.jsx)("i",{children:"SUBMIT "})})})]})]}),Object(m.jsx)("p",{style:{textAlign:"center",margin:"10px 0"},children:Object(m.jsx)(u.b,{to:"/signup",children:"Don't have an account? Sign up here!"})}),Object(m.jsx)("div",{style:{height:"60px"}})]})};var Z=function(e){var t=Object(E.a)(C),n=t.loading,c=t.data,a=Object(Y.a)(V),r=(Object(N.a)(a,1)[0],(null===c||void 0===c?void 0:c.me)||{});return(null===r||void 0===r?void 0:r.username)?n?Object(m.jsx)("h2",{children:"LOADING..."}):Object(m.jsxs)("main",{children:[Object(m.jsxs)("div",{className:"article-box",children:[Object(m.jsxs)("section",{className:"article-content",children:[Object(m.jsx)("h4",{className:"article-title",children:"Article Title"}),Object(m.jsx)("p",{className:"article-source",children:"Article Source"}),Object(m.jsx)("p",{className:"article-text",children:"Article text article text article text article text article text article text article text article text article text article text article text article text article text article text article text article text."})]}),Object(m.jsx)("div",{className:"article-image",style:{backgroundImage:"url(https://via.placeholder.com/120x478)"},children:Object(m.jsx)("div",{className:"article-save",children:"Save"})})]}),Object(m.jsxs)("div",{className:"article-box",children:[Object(m.jsxs)("section",{className:"article-content",children:[Object(m.jsx)("h4",{className:"article-title saved",children:"Article Title"}),Object(m.jsx)("p",{className:"article-source",children:"Article Source"}),Object(m.jsx)("p",{className:"article-text",children:"Article text article text article text article text article text article text article text article text article text article text article text article text article text article text article text article text."})]}),Object(m.jsx)("div",{className:"article-image",style:{backgroundImage:"url(https://via.placeholder.com/200x340)"},children:Object(m.jsx)("div",{className:"article-save",children:"Save"})})]})]}):Object(m.jsx)("h4",{children:"You need to be logged in to see this page. Use the navigation links above to sign up or log in!"})};var ee=function(){return Object(m.jsx)(u.a,{children:Object(m.jsxs)("div",{className:"body-overlay",style:{backgroundImage:"url(brick.jpeg)"},children:[Object(m.jsx)(f,{}),Object(m.jsxs)(h.c,{children:[Object(m.jsx)(h.a,{exact:!0,path:"/",component:B}),Object(m.jsx)(h.a,{exact:!0,path:"/login",component:X}),Object(m.jsx)(h.a,{exact:!0,path:"/signup",component:W}),Object(m.jsx)(h.a,{exact:!0,path:"/saved",component:Z}),Object(m.jsx)(h.a,{render:function(){return Object(m.jsx)(P,{})}})]}),Object(m.jsx)("div",{style:{height:"60px"}}),Object(m.jsx)(q,{})]})})},te=Object(a.a)({uri:"/graphql"}),ne=Object(l.a)((function(e,t){var n=t.headers,a=localStorage.getItem("id_token");return{headers:Object(c.a)(Object(c.a)({},n),{},{authorization:a?"Bearer ".concat(a):""})}})),ce=new r.a({link:ne.concat(te),cache:new i.a});b.a.render(Object(m.jsx)(j.a.StrictMode,{children:Object(m.jsx)(s.a,{client:ce,children:Object(m.jsx)(ee,{})})}),document.getElementById("root"))}},[[96,1,2]]]);
//# sourceMappingURL=main.42abb1b0.chunk.js.map